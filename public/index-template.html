<!DOCTYPE html>
<html lang="en">
<head>
  <!-- NUCLEAR OPTION PATH FIX - Must be the very first script to execute -->
  <script src="nuclear-path-fix.js"></script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><!-- SITE_TITLE_PLACEHOLDER --></title>
  <meta name="description" content="<!-- SITE_DESCRIPTION_PLACEHOLDER -->" />
  <!-- STATIC_CSS_PLACEHOLDER -->
  <!-- STATIC_METADATA_PLACEHOLDER -->
  <script>
    // Set up global static site configuration
    window.STATIC_SITE_MODE = true;
    window.STATIC_SITE_BASE_URL = ''; // Will be filled during build
    window.STATIC_SITE_GENERATED_AT = '<!-- STATIC_TIMESTAMP_PLACEHOLDER -->'; 
    
    // GitHub Pages repository name detection (for router fix)
    window.REPO_NAME = '<!-- REPO_NAME_PLACEHOLDER -->'; // Will be filled during build
    window.REPO_BASE = '<!-- REPO_BASE_PLACEHOLDER -->'; // Will be filled during build with the actual base URL
    
    // Static data will be injected here during build
    window.STATIC_DATA = <!-- STATIC_DATA_PLACEHOLDER -->;
    
    // Flag to indicate this is a fixed version with enhanced router fixes (v5.0)
    window.STATIC_SITE_ROUTER_FIXED = true;
    window.ROUTER_FIX_VERSION = '5.0 NUCLEAR';
    
    // Use hash routing instead of browser routing for GitHub Pages compatibility
    window.USE_HASH_ROUTER = true;
  </script>
  
  <!-- ABSOLUTE LAST RESORT FIX for persistent repository path issues -->
  <script>
    // Emergency fix that runs immediately
    (function() {
      function emergencyClean() {
        // Get repo name (try all possible sources)
        const repoName = window.REPO_NAME || window.REPO_BASE?.replace(/^\/|\/$/g, '') || '';
        
        if (window.location.hash && repoName) {
          // Create variants of repo name for checking
          const repoNameLower = repoName.toLowerCase();
          const dashVersion = repoNameLower.replace(/\s+/g, '-');
          const noSpaceVersion = repoNameLower.replace(/\s+/g, '');
          
          // Check for any variant in the URL
          if (
            window.location.hash.toLowerCase().includes('/' + repoNameLower + '/') || 
            window.location.hash.toLowerCase().includes('/' + dashVersion + '/') ||
            window.location.hash.toLowerCase().includes('/' + noSpaceVersion + '/')
          ) {
            console.error('[EmergencyFix] Repository name STILL in URL after all fixes! Forcing clean path');
            window.location.hash = '#/';
          }
        }
      }
      
      // Run immediately
      emergencyClean();
      
      // Run again after delays
      setTimeout(emergencyClean, 200);
      setTimeout(emergencyClean, 500);
      setTimeout(emergencyClean, 1000);
    })();
  </script>
  
  <!-- MAXIMUM FORCE PATH FIX (v4.0) - Most aggressive handling of URLs - must be loaded first -->
  <script src="duplicate-path-fix.js"></script>
  
  <!-- Enhanced GitHub Pages router fix v5.0 (fallback for any URL issues not caught above) -->
  <script src="enhanced-router-fix.js"></script>
  
  <script>
    // Periodic path check - final safety measure
    (function() {
      // Run after a short delay to ensure page has loaded
      setTimeout(function() {
        // Get repo name (try all possible sources)
        const repoName = window.REPO_NAME || window.REPO_BASE?.replace(/^\/|\/$/g, '') || '';
        
        if (!repoName) {
          console.warn('[EmergencyFix] No repository name available, skipping hash URL check');
          return;
        }
        
        // Create variants of repo name for checking
        const repoNameLower = repoName.toLowerCase();
        const dashVersion = repoNameLower.replace(/\s+/g, '-');
        const noSpaceVersion = repoNameLower.replace(/\s+/g, '');
        
        // Check if any variant of the repository name is in the hash URL
        const lowerHash = window.location.hash.toLowerCase();
        
        // Create pattern strings to look for - e.g., "/reponame/"
        const patterns = [
          '/' + repoNameLower + '/',
          '/' + dashVersion + '/',
          '/' + noSpaceVersion + '/'
        ];
        
        // Find the first match
        let repoPattern = null;
        let matchIndex = -1;
        
        for (const pattern of patterns) {
          const index = lowerHash.indexOf(pattern);
          if (index >= 0) {
            repoPattern = pattern;
            matchIndex = index;
            break;
          }
        }
        
        // If we found a match, fix the URL
        if (matchIndex >= 0 && repoPattern) {
          console.warn('[EmergencyFix] Detected repository name in hash after all checks!');
          
          // Calculate the pattern length (including the slashes)
          const patternLength = repoPattern.length;
          
          // Find next slash after the repository pattern
          const nextSlashIndex = lowerHash.indexOf('/', matchIndex + patternLength);
          
          // Extract path after repository
          const pathAfterRepo = nextSlashIndex > 0 
            ? window.location.hash.substring(nextSlashIndex)
            : '/'; 
          
          // Construct clean URL
          const cleanHash = '#' + pathAfterRepo;
          
          // Force-replace the hash with clean version
          console.log('[EmergencyFix] Forcing path update: ' + window.location.hash + ' â†’ ' + cleanHash);
          window.location.hash = cleanHash;
        }
      }, 300);
    })();
  </script>
</head>
<body>
  <div id="root"></div>
  
  <!-- Fix relative paths in CSS and other resources -->
  <script>
    // This will be replaced with the actual script during build
    // <!-- STATIC_RESOURCE_FIXER_PLACEHOLDER -->
  </script>
  
  <!-- STATIC_SCRIPTS_PLACEHOLDER -->
</body>
</html>